{% extends "uif/layout.html" %}

{% block title%}UIF | Text{% endblock %}

{% block body %}
<div class="page-header">
    <h1>Text</h1> 
</div>

<div class="row page-block border-bottom-block">
    <div class="col-md-8">
        <h3>Select Sample User</h3>
        <p>To protect rights of users, we only provide few number of sample
            users and never leak the username or other info rather than tweets 
            and status of each peer.</p>
    </div>
    <div class="col-md-3">
        <h3></h3>
        <form role="form" method="POST" action="/uif/text" class="form">
            <div class="form-group">
                <select class="form-control" style="width:250px" 
                    name="user_id">
                    <option value="0">Please Select User</option>
                    <option value="1">User 1.</option>
                    <option value="2">User 2.</option>
                    <option value="3">User 3.</option>
                </select>
            </div>
            <div class="form-group form-group-st">
                <input type="text" value="1" name="tw_page_no" class="hide-btn"/>
                <input type="text" value="1" name="fb_page_no" class="hide-btn"/>
                <input type="text" value="twitter" name="source" class="hide-btn"/>
                <button type="submit" class="btn btn-primary input-long">
                    <span class="glyphicon glyphicon-ok"></span>
                    Submit
                </button>
            </div>
        </form>
    </div>
</div>

{% if session.method == "POST" %}
{{ session }}
<div class="row page-block">
    <div class="col-md-8"><h3>Raw Texts</h3></div>
    <div class="col-md-3">
        <h3></h3>
        <form role="form" method="POST" action="/uif/text" class="form">
            <div class="form-group">
            <input type="text" value="" name="source" class="hide-btn" 
                id="text-source"/>
            <div class="btn-group" style="width:250px">
                <button type="submit" class="btn btn-primary input-mid"
                    id="tw-btn">Twitter</button>
                <button type="submit" class="btn btn-primary input-mid"
                    id="fb-btn">Facebook</button>
            </div>
            </div>
        </form>
    </div>
</div>
<div class="page-block row">
    <div class="col-md-12 well" style="width:850px">
    <table class="table table-striped" style="width:600px">
        <thead>
            <tr>
                <th width=350>Content</th>
                <th width=150>Post time</th>
                <th width=50>Flag</th>
            </tr>
        </thead>
        <tbody>
        {% for text in data['texts'] %}
            <tr>
                <td>{{ text['content'] }}</td>
                <td>{{ text['time'] }}</td>
                <td>{{ text['flag'] }}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
    </div>
</div>
<script>
    $(document).ready(function(){
        i = {{session.user_id}}
        $("select[name='user_id'] option[value='"+i+"']").attr('selected', 'selected')
        $("#fb-btn").click(function(){$("#text-source").val("facebook")})
        $("#tw-btn").click(function(){$("#text-source").val("twitter")})
    })
</script>
{% endif %}

{% endblock %}
